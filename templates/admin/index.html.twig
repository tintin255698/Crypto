{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap.min.css">
{% endblock %}


{% block title %}Hello AdminController!{% endblock %}

{% block body %}
    <div class="container">
        <h1 class="mt-4 mb-4">Liste des utilisateurs</h1>
        <table id="admin" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <th>Email</th>
            <th>Role</th>
            <th>Prenom</th>
            <th>Nom</th>
            <th>Modifier</th>
        </thead>
        <tbody>
            {% for plas in pla %}
                <tr>
            <td>{{ plas.email}}</td>
            <td>
                {% for role in plas.roles %}
                    {% if role == "ROLE_USER" %}
                        Utilisateur
                    {% elseif role == "ROLE_ADMIN"%}
                        Administrateur
                    {% endif %}
                {% endfor %}
            </td>
            <td>{{ plas.prenom }}</td>
            <td>{{ plas.nom }}</td>
            <td><a href="{{ path('admin_modifier', {'id':plas.id}) }}" class="btn btn-dark">Modifier</a></td>
            {%  else %}
        <tr>
            <td colspan="5">Il n'y a pas d'utilisateurs inscrits</td>

        </tr>
            {% endfor %}


        </tbody>
    </table>
    </div>

{% endblock %}

    {% block javascripts %}

        <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap.min.js"></script>
        <script>
            $(document).ready(function() {
                $('#admin').DataTable();
            } );
        </script>


    {% endblock %}



